## 日期

```java
package com.hashtech.attendance.test;

import com.hashtech.attendance.pojo.AttendanceCode;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;

public class TestDate {

    private int calculateWeek(String time1 ,String time2,int count){
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        try {
            Date startDate = df.parse(time1);
            Date endDate = df.parse(time2);

            //判断时间期间是否大于7天
            if((endDate.getTime() - startDate.getTime()) >= (1000*3600*24*7)){
                count++;

                Calendar calendar = Calendar.getInstance();
                calendar.setTime(startDate);
                //添加七天
                calendar.add(Calendar.DAY_OF_MONTH,7);

                String day = df.format(calendar.getTime());
                return this.calculateWeek(day,time2,count);
            }else {
                return count;
            }

        } catch (ParseException e) {

            e.printStackTrace();
            return count;
        }

    }
    private List<Integer> getDays(String time1, String time2) {
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        List<Integer> days = new ArrayList<>();
        try {
            Date startDate = df.parse(time1);
            Date endDate = df.parse(time2);

            Calendar startCalendar = Calendar.getInstance();
            startCalendar.setTime(startDate);

            int startDay =startCalendar.get(Calendar.DAY_OF_MONTH);
            int weekDay = startCalendar.get(Calendar.DAY_OF_WEEK);

            Calendar endCalendar = Calendar.getInstance();
            endCalendar.setTime(endDate);
            int endDay = endCalendar.get(Calendar.DAY_OF_MONTH);

            for (int i = 0; i < endDay-startDay; i++) {

                if (i == 0){
                    if (weekDay!=1){//判断第一天是否为周日
                        days.add(startDay);
                    }
                }else {
                    Calendar calendar = Calendar.getInstance();
                    calendar.setTime(startDate);
                    //添加i天
                    calendar.add(Calendar.DAY_OF_MONTH,i);
                    int week = calendar.get(Calendar.DAY_OF_WEEK);
                    if (week != 1){//判断是否为周日
                        days.add(calendar.get(Calendar.DAY_OF_MONTH));
                    }

                }

            }


        } catch (ParseException e) {
            e.printStackTrace();
        }




        return days;
    }

    public static void main(String[] args) {
        TestDate testDate = new TestDate();
        String time1 ="2019-07-03 11:37:37";
        String time2 ="2019-07-14 00:00:00";

        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        String end = time2.substring(11,time2.length());
        if(end.equals("00:00:00")){
            System.out.println("00:00:00");
            //减一毫秒
            try {
                Date endDate = df.parse(time2);
                long time = endDate.getTime()-1;
                Date newEndDate = new Date(time);

                System.out.println(newEndDate);
                String newEndTime = df.format(newEndDate);
                System.out.println(newEndTime);
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }


        int count = testDate.calculateWeek(time1,time2,0);
        System.out.println(count);

        List<AttendanceCode> attendanceCodeList=testDate.getTimeQuantum(time1,time2,count);


        System.out.println(attendanceCodeList);


        List<Integer> day = testDate.getDays("2019-07-15 00:00:00","2019-07-24 00:00:00");
        System.out.println(day);
    }
    private  List<AttendanceCode> getTimeQuantum(String time1 ,String time2,int count ){

        List<AttendanceCode> attendanceCodeList = new ArrayList<>();
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        try {
            Date startDate = df.parse(time1);
            Date endDate = df.parse(time2);
            Calendar calendar = Calendar.getInstance();
            calendar.setTime(startDate);
            calendar.add(Calendar.DAY_OF_MONTH,6);
            String day = df.format(calendar.getTime());

            if(count == 0){//相差不超过一周
                AttendanceCode attendanceCode0 = new AttendanceCode();
                attendanceCode0.setStartDate(time1);
                attendanceCode0.setEndDate(time2);
                attendanceCodeList.add(attendanceCode0);
            }else if (count == 1){//相差一周

                Calendar calendar2 = Calendar.getInstance();
                calendar2.setTime(startDate);
                //添加七天
                calendar2.add(Calendar.DAY_OF_MONTH,7);
                String day2 = df.format(calendar2.getTime());

                AttendanceCode attendanceCode1 = new AttendanceCode();
                attendanceCode1.setStartDate(time1);
                attendanceCode1.setEndDate(day);

                AttendanceCode attendanceCode2 = new AttendanceCode();
                attendanceCode2.setStartDate(day2);
                attendanceCode2.setEndDate(time2);

                attendanceCodeList.add(attendanceCode1);
                attendanceCodeList.add(attendanceCode2);

            }else {//超过2周
                for (int i = 1; i <= count ; i++) {
                    if(i == 1){//处理第一周的
                        AttendanceCode attendanceCode0 = new AttendanceCode();
                        attendanceCode0.setStartDate(time1);
                        attendanceCode0.setEndDate(day);
                        attendanceCodeList.add(attendanceCode0);

                    }if (i<=count-1){
                        Calendar calendarCount = Calendar.getInstance();
                        calendarCount.setTime(startDate);
                        calendarCount.add(Calendar.DAY_OF_MONTH,7*i);
                        String startTime = df.format(calendarCount.getTime());

                        Calendar calendarCount2 = Calendar.getInstance();
                        calendarCount2.setTime(startDate);
                        calendarCount2.add(Calendar.DAY_OF_MONTH,7*(i+1)-1);
                        String endTime = df.format(calendarCount2.getTime());

                        AttendanceCode attendanceCode = new AttendanceCode();
                        attendanceCode.setStartDate(startTime);
                        attendanceCode.setEndDate(endTime);

                        attendanceCodeList.add(attendanceCode);

                    }else {//最后一个

                        Calendar calendarLast = Calendar.getInstance();
                        calendarLast.setTime(startDate);
                        calendarLast.add(Calendar.DAY_OF_MONTH,7*i);
                        String startTimeLast = df.format(calendarLast.getTime());

                        AttendanceCode attendanceCodeLast = new AttendanceCode();
                        attendanceCodeLast.setStartDate(startTimeLast);
                        attendanceCodeLast.setEndDate(time2);

                        attendanceCodeList.add(attendanceCodeLast);
                    }

                }
            }

        } catch (ParseException e) {

            e.printStackTrace();
        }

        return  attendanceCodeList;
    }

}

```

```java
package com.hashtech.attendance.util;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;

public class Test {

    public List<Date> getDaysDetailForTitle(String time1, String time2) {
        List<Date> dates = new ArrayList<>();
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");

        try {
            Date startDate = df.parse(time1);
            Date endDate = df.parse(time2);

            Calendar startCalendar = Calendar.getInstance();
            startCalendar.setTime(startDate);
            int startDay =startCalendar.get(Calendar.DAY_OF_MONTH);
            int weekDay = startCalendar.get(Calendar.DAY_OF_WEEK);

            Calendar endCalendar = Calendar.getInstance();
            endCalendar.setTime(endDate);
            int endDay = endCalendar.get(Calendar.DAY_OF_MONTH);

            for (int i = 0; i <= endDay-startDay; i++) {

                if (i == 0){
                    if (weekDay!=1){//判断第一天是否为周日
                        dates.add(startDate);
                    }
                }else {
                    Calendar calendar = Calendar.getInstance();
                    calendar.setTime(startDate);
                    //添加i天
                    calendar.add(Calendar.DAY_OF_MONTH,i);
                    int week = calendar.get(Calendar.DAY_OF_WEEK);
                    if (week != 1){//判断是否为周日
                        dates.add(calendar.getTime());
                    }
                }
            }



        } catch (ParseException e) {
            e.printStackTrace();
        }

        return dates;
    }
    public static void main(String[] args) {
        Test testDate = new Test();
        String time1 ="2019-07-03 11:37:37";
        String time2 ="2019-07-19 00:00:01";

        List<Date> dates=testDate.getDaysDetailForTitle(time1,time2);
        System.out.println(dates);
    }
}

```

