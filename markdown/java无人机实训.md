### java无人机实训

#### 开发环境和技术架构

通过网络编程（socket）对无人机进行控制，从单台到整个集群。

系统架构：

![](E:\markdown\无人机.PNG)





无人机模型

![E:\markdown\无人机](E:\markdown\无人机.jpg)

技术类型：

SpringBoot、HttpClient

嵌入式：

Wifi无线模块

注意事项：

1.客户端与无人机通过`TCP/IP socket`协议来进行网络编程，无人机端是服务端。

2.IP地址：192.168.4.1

端口号：333

3.客户端先给无人机以字节流发“GEC\r\n”过去，无人机收到后会发一个34位的byte数组给客户端，并且无人机的灯会连续闪烁。

4客户端与无人机通信的数据是由一个34位的byte数组组成的，所有参数都通过这个数组给无人机。

5.具体通信值见左边表格。

6.无人机会每隔5毫秒检查一次有没有发数据过来，没有就停止现有状态。

> 备注：
> 1、在正常控制端与四轴正常通讯前，控制端先要向四轴发送 47 45 43 0D 0A （GEC\r\n的十六进制）
> 四轴返回AA 50 1C …… 0D 0A，而且四轴电机旁蓝灯闪烁，即连接成功。
> 2、除电压值外，所有数值均为16位，分为高8位与低8位，油门高即油门高8位
> 3、主动请求获得外环、内环PID、姿态时，buf[3]-buf[30]的值应该为0
> 4、姿态返回数值的数值会比实际值少500，读取时应该加500，写过去时数值为（0-1000）
> 5、外环数据传输时数值比实际值大100倍，因此写时应写传输值=实际值*100，读时实际值=传输值/100
> 6、内环数据传输时数值比实际值大10倍，因此写时应写传输值=实际值*10，读时实际值=传输值/10
> 7、姿态值均为十六位有符号数值，内外环为十六位无符号数值
> 8、输出横滚、俯仰、航向值即四轴经过PID算法后实际输出给电机的值





pom文件

```xml

```

SOI-IOS网络通讯协议模型

![](E:\markdown\os网络7层模型.jpg)

- 物理层：RJ45、CLOCK、IEEE802.3 （中继器，集线器，网关）
- 数据链路：PPP、FR、HDLC、VLAN、MAC （网桥，交换机）
- 网络层：IP、ICMP、ARP、RARP、OSPF、IPX、RIP、IGRP、 （路由器）
- 传输层：TCP、UDP、SPX
- 会话层：NFS、SQL、NETBIOS、RPC
- 表示层：JPEG、MPEG、ASII
- 应用层：FTP、DNS、Telnet、SMTP、HTTP、WWW、NFS

#### 开发步骤



首先分析起飞过程：

1.点灯

2.翅膀转动

3.让翅膀转到一定的

4.PID平衡调节算法

5.起飞



